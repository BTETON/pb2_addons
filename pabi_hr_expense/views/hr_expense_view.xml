<?xml version="1.0" encoding="utf-8"?>

<openerp>
	<data>
		<!-- Expenses -->
        <record id="view_expenses_form" model="ir.ui.view">
            <field name="name">hr.expense.form</field>
            <field name="model">hr.expense.expense</field>
            <field name="inherit_id" ref="hr_expense.view_expenses_form"/>
            <field name="arch" type="xml">
            	<field name="employee_id" position="after">
            		<field name="create_uid" />
            	</field>
            	<field name="user_valid" position="before">
            		<field name="user_accept" attrs="{'invisible': [('state','=','draft')]}" context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'base.group_hr_user']}"/>
            	</field>
				<field name="date" position="after">
					<field name="advance_type" attrs="{'invisible': [('is_employee_advance', '=', False)], 'required': [('is_employee_advance', '=', True)]}"/>
					<field name="date_back" attrs="{'invisible': [('advance_type', '!=', 'attend_seminar')], 'required': [('advance_type', '=', 'attend_seminar')]}"/>
					<field name="apweb_ref_url" widget="url" /><!-- TODO: attrs="{'invisible': [('apweb_ref_url', '=', False)]}" -->
		    	</field>
				<field name="currency_id" position="after">
		    		<field name="employee_bank_id" />
				</field>
				<field name="department_id" position="attributes" >
					<attribute name="invisible">True</attribute>
				</field>
				<notebook position="inside" >
					<page string="Due History" attrs="{'invisible': [('is_employee_advance', '=', False)]}">
		                <group>
		                	<group>
		                		<field name="date_due" />
		                	</group>
		                	<group>
		                		<button name="%(action_change_advance_date_due)d"
						    		string="â‡’ Update Due Date" type="action" class="oe_link"/>
		                	</group>
		                </group>
						<field name="advance_due_history_ids" >
							<tree>
								<field name="date_due" />
								<field name="write_uid" />
								<field name="write_date" />
							</tree>
						</field>
					</page>
					<page string="Attendee">
						<field name="attendee_employee_ids" >
							<tree editable="bottom">
								<field name="sequence" widget="handle"/>
								<field name="expense_id" invisible="1"/>
								<field name="employee_id" />
								<field name="position_id" />
								<field name="section_id" />
								<field name="project_id" />
							</tree>
						</field>
						<field name="attendee_external_ids" >
							<tree editable="bottom">
								<field name="sequence" widget="handle"/>
								<field name="expense_id" invisible="1"/>
								<field name="attendee_name" />
								<field name="position" />
							</tree>
						</field>
					</page>
				</notebook>
            </field>
        </record>

		<!-- Expense Regulations -->
        <record id="view_hr_expense_rule_tree" model="ir.ui.view">
            <field name="name">view.hr.expense.rule.tree</field>
            <field name="model">hr.expense.rule</field>
            <field name="arch" type="xml">
                <tree string="Expense Regulations" editable="bottom">
                    <field name="activity_id"/>
                    <field name="position"/>
                    <field name="condition_1"/>
                    <field name="condition_2"/>
                    <field name="uom"/>
                    <field name="amount"/>
                </tree>
            </field>
        </record>

        <record id="hr_expense_rule" model="ir.actions.act_window">
            <field name="name">Expense Regulations</field>
            <field name="res_model">hr.expense.rule</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new expense regulations. 
             </p>
            </field>
        </record>

        <menuitem id="menu_hr_expense_rule" name="Expense Regulations" parent="hr.menu_hr_configuration" action="hr_expense_rule" sequence="50"/>
		
		
	</data>
</openerp>
